!function(t,e){var n=this;this.get_elements=function(){var t=[];if(e.querySelectorAll)for(var i=e.querySelectorAll("[autocolumn]"),n=0;n<i.length;n++)t.push(i[n]);else for(var l=e.getElementsByTagName("*"),n=0,r=l.length;r>n;n++)null!==l[n].getAttribute(attribute)&&t.push(l[n]);return t},this.update_layout=function(){for(i in n.elems){var t=n.elems[i],e=t.clientWidth,l=t.autocolumn,r=(e+l.margin)/(l.minWidth+l.margin),a=(e+l.margin)/(l.maxWidth+l.margin);r=Math.floor(r),a=Math.floor(a);var h,o,d=99999;for(k=a;k<=r;k++){var s=(e-(k-1)*l.margin)/k;k==a&&console.log(e);var m=Math.abs(s-l.width);d>m&&s<l.maxWidth&&(h=k,o=s,d=m)}if(h!=l.count){l.count=h;for(j in t.children)t.children[j].style&&(t.children[j].style.width=o/e*100+"%",t.children[j].style.marginRight=0,t.children[j].style.marginLeft=j%h==0?0:l.margin/e*100+"%")}}},this.init=function(){n.elems=this.get_elements();for(i in n.elems)if(0!=n.elems[i].children.length){var e=n.elems[i].children[0],l={};if(l.width=e.offsetWidth,e.style.width=0,0==e.offsetWidth?l.minWidth=100:l.minWidth=e.offsetWidth,e.style.width=9999,e.offsetWidth<n.elems[i].clientWidth?l.maxWidth=e.offsetWidth:l.maxWidth=n.elems[i].offsetWidth,t.getComputedStyle)var r=t.getComputedStyle(e,null).marginRight;else var r=20;r=r.match(/\d/g).join(""),l.margin=2*r,l.count=0,n.elems[i].autocolumn=l}n.update_layout()},this.resize_handler=function(){setTimeout(n.update_layout,50)},this.load_handler=function(){setTimeout(n.init,0)},t.addEventListener("resize",n.resize_handler,!0),t.addEventListener("load",n.load_handler,!0)}(window,document);
